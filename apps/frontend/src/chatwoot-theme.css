/* Chatwoot-inspired theme tokens and embed tweaks */
:root {
  --background: 210 20% 98%;
  --foreground: 220 18% 16%;
  --muted: 210 16% 93%;
  --muted-foreground: 220 10% 45%;
  --popover: 0 0% 100%;
  --popover-foreground: 220 18% 16%;
  --card: 0 0% 100%;
  --card-foreground: 220 18% 16%;
  --border: 220 13% 90%;
  --input: 220 13% 90%;
  --primary: 217 91% 55%;
  --primary-foreground: 0 0% 100%;
  --secondary: 210 16% 95%;
  --secondary-foreground: 220 12% 20%;
  --accent: 210 16% 95%;
  --accent-foreground: 220 12% 20%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
  --ring: 217 91% 55%;
  --radius: 12px;
  font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
}

:root[data-chatwoot-theme="dark"],
.dark {
  --background: 220 15% 10%;
  --foreground: 210 20% 96%;
  --muted: 220 12% 16%;
  --muted-foreground: 220 8% 62%;
  --popover: 220 14% 12%;
  --popover-foreground: 210 20% 96%;
  --card: 220 14% 12%;
  --card-foreground: 210 20% 96%;
  --border: 220 10% 20%;
  --input: 220 10% 20%;
  --primary: 217 91% 60%;
  --primary-foreground: 0 0% 100%;
  --secondary: 220 12% 18%;
  --secondary-foreground: 210 20% 96%;
  --accent: 220 12% 18%;
  --accent-foreground: 210 20% 96%;
  --destructive: 0 72% 50%;
  --destructive-foreground: 0 0% 100%;
  --ring: 217 91% 60%;
}

body.chatwoot-embed {
  background: hsl(var(--background));
}

.chatwoot-chat-shell {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
}

.chatwoot-sidebar {
  backdrop-filter: saturate(120%) blur(2px);
  background: linear-gradient(
      180deg,
      hsla(var(--background), 0.98) 0%,
      hsla(var(--background), 0.9) 100%
    ),
    hsl(var(--background));
}

.chatwoot-sidebar-header {
  position: sticky;
  top: 0;
  background: hsl(var(--background) / 0.9);
  backdrop-filter: blur(4px);
  z-index: 5;
}

.chatwoot-panel {
  background: hsl(var(--background));
}

.chatwoot-header {
  backdrop-filter: blur(2px);
  background: hsl(var(--background) / 0.95);
}

.chatwoot-toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
}

.chatwoot-search {
  transition: box-shadow 180ms ease;
}

.chatwoot-search:focus-within {
  box-shadow: 0 0 0 3px hsl(var(--primary) / 0.15);
}

.chatwoot-room-item {
  transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease;
}

.chatwoot-room-item:hover {
  transform: translateY(-1px);
  box-shadow: 0 1px 3px hsl(var(--foreground) / 0.04);
}

.chatwoot-room-item--active {
  background: hsl(var(--accent));
  box-shadow: inset 0 0 0 1px hsl(var(--border));
}

.chatwoot-messages {
  scrollbar-gutter: stable;
}

.chatwoot-bubble {
  border: 1px solid hsl(var(--border));
  line-height: 1.5;
}

.chatwoot-bubble--own {
  background: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  border-color: transparent;
}

.chatwoot-bubble--peer {
  background: hsl(var(--card));
  color: hsl(var(--card-foreground));
}

.chatwoot-composer {
  position: sticky;
  bottom: 0;
  backdrop-filter: blur(2px);
  background: hsl(var(--background) / 0.95);
}

.chatwoot-composer-input {
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  box-shadow: 0 1px 2px hsl(var(--foreground) / 0.02);
  border-radius: 16px;
  padding: 12px 14px;
}

.chatwoot-composer-box {
  position: relative;
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  border-radius: 16px;
  box-shadow: 0 1px 2px hsl(var(--foreground) / 0.02);
}

.chatwoot-composer-toolbar {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .75rem;
  border-bottom: 1px solid hsl(var(--border));
}

.chatwoot-composer-actions {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .75rem;
}

.chatwoot-ghost {
  background: hsl(var(--muted) / 0.6);
  border: 1px solid hsl(var(--border));
  transition: background 150ms ease, transform 150ms ease, box-shadow 150ms ease;
}

.chatwoot-ghost:hover {
  background: hsl(var(--muted));
  transform: translateY(-1px);
  box-shadow: 0 2px 4px hsl(var(--foreground) / 0.06);
}

.chatwoot-empty {
  background: radial-gradient(
    circle at top,
    hsl(var(--muted)) 0%,
    transparent 60%
  );
}

.chatwoot-avatar {
  box-shadow: inset 0 0 0 1px hsl(var(--border));
}

.chatwoot-meta {
  color: hsl(var(--muted-foreground));
}

.chatwoot-mention {
  background: hsl(var(--primary) / 0.12);
  color: hsl(var(--primary));
  padding: 1px 6px;
  border-radius: 999px;
  border: 1px solid hsl(var(--primary) / 0.2);
}

.chatwoot-delivery {
  font-size: 10px;
  letter-spacing: .02em;
}

.chatwoot-surface {
  background: hsl(var(--card));
  color: hsl(var(--card-foreground));
  border-color: hsl(var(--border));
}

.chatwoot-muted {
  color: hsl(var(--muted-foreground));
}

.chatwoot-divider {
  border-color: hsl(var(--border));
}

.chatwoot-pill {
  border-radius: 999px;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--muted));
  color: hsl(var(--muted-foreground));
}

.chatwoot-pill button {
  border-radius: 999px;
  padding: 3px 10px;
  font-size: 11px;
  transition: background 150ms ease, color 150ms ease;
}

.chatwoot-pill button[data-active="true"] {
  background: hsl(var(--card));
  color: hsl(var(--foreground));
}

/* Variant C (Apple-style refinement) */
.chatwoot-variant-c .chatwoot-sidebar {
  backdrop-filter: saturate(200%) blur(16px);
  background: linear-gradient(
      180deg,
      hsla(var(--background), 0.98) 0%,
      hsla(var(--background), 0.92) 100%
    ),
    hsl(var(--background));
  border-right: 1px solid hsl(var(--border));
}

.chatwoot-variant-c .chatwoot-header {
  backdrop-filter: blur(18px);
  background: hsl(var(--background) / 0.85);
  border-bottom: 1px solid hsl(var(--border));
}

.chatwoot-variant-c .chatwoot-composer {
  backdrop-filter: blur(18px);
  background: hsl(var(--background) / 0.85);
}

.chatwoot-variant-c .chatwoot-room-item {
  border-radius: 16px;
  box-shadow: 0 10px 28px hsl(var(--foreground) / 0.08);
}

.chatwoot-variant-c .chatwoot-room-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 32px hsl(var(--foreground) / 0.12);
}

.chatwoot-variant-c .chatwoot-bubble {
  border-radius: 18px;
  box-shadow: 0 10px 22px hsl(var(--foreground) / 0.08);
}

.chatwoot-variant-c .chatwoot-composer-input {
  background: hsl(var(--card) / 0.9);
}

.chatwoot-variant-c .chatwoot-search {
  border-radius: 14px;
  background: hsl(var(--card) / 0.8);
}

.chatwoot-variant-c .chatwoot-surface {
  box-shadow: 0 18px 40px hsl(var(--foreground) / 0.12);
  border-radius: 16px;
}

.chatwoot-variant-c .chatwoot-pill {
  background: hsl(var(--card) / 0.8);
  backdrop-filter: blur(8px);
}

@media (prefers-reduced-motion: reduce) {
  .chatwoot-room-item,
  .chatwoot-ghost {
    transition: none;
  }
}
